!function(e){var o={};function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,o,n){r.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,o){if(1&o&&(e=r(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var t in e)r.d(n,t,function(o){return e[o]}.bind(null,t));return n},r.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="",r(r.s=6)}([function(e,o){e.exports=require("express")},function(e,o){e.exports={secret:"masterSoft2020"}},function(e,o){e.exports=require("mssql")},function(e,o){e.exports=require("bcrypt")},function(e,o){e.exports=require("jsonwebtoken")},function(e,o,r){const n=r(2);var t;t={user:process.env.USERSQL,password:process.env.PASSWORDSQL,database:process.env.DATABASESQL,server:process.env.SERVERSQL,options:{enableArithAbort:!0,encrypt:!1}};var s={abrirConexion:void 0,cerrarConexion:void 0,abrirConexionPOOL:void 0,cerrarConexionPOOL:void 0};const i={};s.abrirConexionPOOL=async e=>{if(!Object.prototype.hasOwnProperty.call(i,e)){const o=new n.ConnectionPool(t),r=o.close.bind(o);return o.close=(...o)=>(delete i[e],r(...o)),await o.connect(),i[e]=o,i[e]}},s.cerrarConexionPOOL=()=>Promise.all(Object.values(i).map(e=>e.close())),e.exports=s},function(e,o,r){const n=r(0),t=r(7);const s=n();s.use(t()),s.use(n.json()),s.use(n.urlencoded({extended:!0})),s.use("/api/logueo",r(8)),s.use("/api/usuarios",r(10)),s.use("/api/autentificasion",r(11)),s.set("port",process.env.PORT||5e3),s.listen(s.get("port"),(e,o)=>{o?console.log(o):console.log("Servidor corriendo en el PUERTO",s.get("port"))})},function(e,o){e.exports=require("cors")},function(e,o,r){const{Router:n}=r(0),t=r(3),{secret:s}=r(1),i=r(4),{token:a}=r(9),u=n();u.post("/",async(e,o)=>{const{abrirConexionPOOL:n,cerrarConexionPOOL:s}=r(5),{usuario:a,pw:u}=e.body,{Request:c,VarChar:p}=r(2);try{const e=new c(await n("logueoUsuario"));e.input("usuario",p,a);const l=await e.execute("pa_login");if(l)if(s(),0===l.rowsAffected[0])o.status(200).json({mensaje:"Usuario inexistente "});else if(t.compareSync(u,l.recordset[0].pw)){const e={nombreUsuario:l.recordset[0].nombreUsuario,apellidoUsuario:l.recordset[0].apellidoUsuario,usuario:l.recordset[0].usuario};i.sign(e,r(1).secret,{expiresIn:14400},(e,r)=>{e?o.status(200).json({mensaje:"Error al generar el token"}):o.status(200).json({token:r})})}else o.status(200).json({mensaje:"Password incorrecta "});else s(),o.status(200).json(l)}catch(e){s(),o.status(403).json({mensaje:e.message})}}),e.exports=u},function(e,o){e.exports=require("morgan")},function(e,o,r){const{Router:n}=r(0),t=r(3),s=n();s.post("/insert",async(e,o)=>{const{abrirConexionPOOL:n,cerrarConexionPOOL:s}=r(5),{nombreUsuario:i,apellidoUsuario:a,usuario:u,pw:c}=e.body;try{const e=await n("insertUsuario"),{Request:p,VarChar:l}=r(2),f=new p(e);f.input("nombreUsuario",l,i),f.input("apellidoUsuario",l,a),f.input("usuario",l,u),f.input("pw",l,t.hashSync(c,10)),await f.execute("pa_insertUsuario")&&(s(),o.status(200).json({mensaje:"Usuario insertado correctamente "}))}catch(e){s(),o.status(403).json({mensaje:e.message})}}),e.exports=s},function(e,o,r){const n=r(0),t=r(4),s=r(1),i=n();i.get("/",(e,o)=>{if(e.headers.authorization){const r=e.headers.authorization.split(" ")[1];t.verify(r,s.secret,(e,r)=>{e?o.status(403).json({mensaje:e.name}):o.status(200).json(r)})}else o.status(403).json({mensaje:"No envio el Token en el headers"})}),e.exports=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXhwcmVzc1wiIiwid2VicGFjazovLy8uL0NPTkZJRy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtc3NxbFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImJjcnlwdFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImpzb253ZWJ0b2tlblwiIiwid2VicGFjazovLy8uL2NvbmV4aW9uZXMvc3FsU2VydmVyLmpzIiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImNvcnNcIiIsIndlYnBhY2s6Ly8vLi9ydXRhc0FwaS9Mb2d1ZW8uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9yZ2FuXCIiLCJ3ZWJwYWNrOi8vLy4vcnV0YXNBcGkvdXN1YXJpb3MuanMiLCJ3ZWJwYWNrOi8vLy4vcnV0YXNBcGkvQXV0ZW50aWZpY2FzaW9uLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVxdWlyZSIsInNlY3JldCIsIm1zc3FsIiwiVVJJIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJVU0VSU1FMIiwicGFzc3dvcmQiLCJQQVNTV09SRFNRTCIsImRhdGFiYXNlIiwiREFUQUJBU0VTUUwiLCJzZXJ2ZXIiLCJTRVJWRVJTUUwiLCJvcHRpb25zIiwiZW5hYmxlQXJpdGhBYm9ydCIsImVuY3J5cHQiLCJDb25leGlvblNRTCIsImFicmlyQ29uZXhpb24iLCJ1bmRlZmluZWQiLCJjZXJyYXJDb25leGlvbiIsImFicmlyQ29uZXhpb25QT09MIiwiY2VycmFyQ29uZXhpb25QT09MIiwiY29uZXhpb25lcyIsImFzeW5jIiwibmV3Q29uZXhpb24iLCJDb25uZWN0aW9uUG9vbCIsImNsb3NlIiwiYXJncyIsImNvbm5lY3QiLCJQcm9taXNlIiwiYWxsIiwidmFsdWVzIiwibWFwIiwicG9vbCIsImV4cHJlc3MiLCJjb3JzIiwic2Vydmlkb3IiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2V0IiwiUE9SVCIsImxpc3RlbiIsImUiLCJjb25zb2xlIiwibG9nIiwiUm91dGVyIiwiYmNyeXB0Iiwiand0IiwidG9rZW4iLCJyb3V0ZXIiLCJwb3N0IiwicmVxIiwicmVzIiwidXN1YXJpbyIsInB3IiwiYm9keSIsIlJlcXVlc3QiLCJWYXJDaGFyIiwibXlSZXF1ZXN0IiwiaW5wdXQiLCJyZXN1bHQiLCJleGVjdXRlIiwicm93c0FmZmVjdGVkIiwic3RhdHVzIiwibWVuc2FqZSIsImNvbXBhcmVTeW5jIiwicmVjb3Jkc2V0Iiwibm9tYnJlVXN1YXJpbyIsImFwZWxsaWRvVXN1YXJpbyIsInNpZ24iLCJleHBpcmVzSW4iLCJlcnJvciIsIm1lc3NhZ2UiLCJiY3J5cCIsImNvbmV4aW9uIiwiaGFzaFN5bmMiLCJDT05GSUciLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInNwbGl0IiwidmVyaWZ5Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHLGdCQ2xGckRoQyxFQUFPRCxRQUFVa0MsUUFBUSxZLGNDQXpCakMsRUFBT0QsUUFBVSxDQUNibUMsT0FBTyxtQixjQ0RYbEMsRUFBT0QsUUFBVWtDLFFBQVEsVSxjQ0F6QmpDLEVBQU9ELFFBQVVrQyxRQUFRLFcsY0NBekJqQyxFQUFPRCxRQUFVa0MsUUFBUSxpQixnQkNBekIsTUFBTUUsRUFBUUYsRUFBUSxHQUd0QixJQUFJRyxFQThDQUEsRUFBTSxDQUNGQyxLQUFPQyxRQUFRQyxJQUFJQyxRQUNuQkMsU0FBV0gsUUFBUUMsSUFBSUcsWUFDdkJDLFNBQVdMLFFBQVFDLElBQUlLLFlBQ3ZCQyxPQUFTUCxRQUFRQyxJQUFJTyxVQUNyQkMsUUFBVSxDQUNOQyxrQkFBbUIsRUFDbkJDLFNBQVUsSUFLdEIsSUFBSUMsRUFBYyxDQUFFQyxtQkFBY0MsRUFBV0Msb0JBQWVELEVBQVdFLHVCQUFrQkYsRUFBV0csd0JBQW1CSCxHQXVCdkgsTUFBTUksRUFBYSxHQUVuQk4sRUFBWUksa0JBQW9CRyxVQUM1QixJQUFJOUMsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLb0QsRUFBV2hELEdBQU0sQ0FDdEQsTUFBTWtELEVBQWMsSUFBSXZCLEVBQU13QixlQUFldkIsR0FDdkN3QixFQUFRRixFQUFZRSxNQUFNbkMsS0FBS2lDLEdBT3JDLE9BTkFBLEVBQVlFLE1BQVEsSUFBSUMsWUFDYkwsRUFBV2hELEdBQ1hvRCxLQUFTQyxVQUVkSCxFQUFZSSxVQUNsQk4sRUFBV2hELEdBQVFrRCxFQUNaRixFQUFXaEQsS0FJMUIwQyxFQUFZSyxtQkFBcUIsSUFDdEJRLFFBQVFDLElBQUlyRCxPQUFPc0QsT0FBT1QsR0FBWVUsSUFBS0MsR0FDdkNBLEVBQUtQLFVBR3BCNUQsRUFBT0QsUUFBVW1ELEcsZ0JDekdqQixNQUFNa0IsRUFBVW5DLEVBQVEsR0FDbEJvQyxFQUFPcEMsRUFBUSxHQVNyQixNQUFNcUMsRUFBV0YsSUFDakJFLEVBQVNDLElBQUlGLEtBSWJDLEVBQVNDLElBQUlILEVBQVFJLFFBQ3JCRixFQUFTQyxJQUFJSCxFQUFRSyxXQUFXLENBQUNDLFVBQVUsS0FNM0NKLEVBQVNDLElBQUksY0FBY3RDLEVBQVEsSUFRbkNxQyxFQUFTQyxJQUFJLGdCQUFnQnRDLEVBQVEsS0FDckNxQyxFQUFTQyxJQUFJLHVCQUF1QnRDLEVBQVEsS0FJNUNxQyxFQUFTSyxJQUFJLE9BQU9yQyxRQUFRQyxJQUFJcUMsTUFBUSxLQUV4Q04sRUFBU08sT0FBT1AsRUFBU3hELElBQUksUUFBUSxDQUFDVCxFQUFFeUUsS0FDakNBLEVBQUdDLFFBQVFDLElBQUlGLEdBTVZDLFFBQVFDLElBQUksa0NBQWtDVixFQUFTeEQsSUFBSSxZLGNDNUN2RWQsRUFBT0QsUUFBVWtDLFFBQVEsUyxnQkNBekIsTUFBTSxPQUFDZ0QsR0FBVWhELEVBQVEsR0FDbkJpRCxFQUFRakQsRUFBUSxJQUVoQixPQUFDQyxHQUFVRCxFQUFRLEdBQ25Ca0QsRUFBTWxELEVBQVEsSUFDZCxNQUFFbUQsR0FBVW5ELEVBQVEsR0FDcEJvRCxFQUFTSixJQUlmSSxFQUFPQyxLQUFPLElBQU03QixNQUFROEIsRUFBTUMsS0FDOUIsTUFBTSxrQkFBRWxDLEVBQUYsbUJBQXNCQyxHQUF1QnRCLEVBQVMsSUFDdEQsUUFBRXdELEVBQUYsR0FBWUMsR0FBT0gsRUFBSUksTUFDdkIsUUFBRUMsRUFBRixRQUFZQyxHQUFZNUQsRUFBUyxHQUN2QyxJQUNJLE1BQ002RCxFQUFZLElBQUlGLFFBREN0QyxFQUFtQixrQkFFMUN3QyxFQUFVQyxNQUFPLFVBQVlGLEVBQVVKLEdBQ3ZDLE1BQU1PLFFBQWVGLEVBQVVHLFFBQVMsWUFDeEMsR0FBSUQsRUFFQSxHQURBekMsSUFDOEIsSUFBM0J5QyxFQUFPRSxhQUFhLEdBQ25CVixFQUFJVyxPQUFPLEtBQUszQixLQUFPLENBQUU0QixRQUFVLDhCQUduQyxHQUFNbEIsRUFBT21CLFlBQWFYLEVBQUtNLEVBQU9NLFVBQVUsR0FBR1osSUFHOUMsQ0FDRCxNQUFNckQsRUFBTyxDQUNUa0UsY0FBZ0JQLEVBQU9NLFVBQVUsR0FBR0MsY0FDcENDLGdCQUFrQlIsRUFBT00sVUFBVSxHQUFHRSxnQkFDdENmLFFBQVVPLEVBQU9NLFVBQVUsR0FBR2IsU0FFbENOLEVBQUlzQixLQUFNcEUsRUFBT0osRUFBUSxHQUFhQyxPQUFTLENBQUV3RSxVQUFZLE9BQWEsQ0FBRUMsRUFBUXZCLEtBQzNFdUIsRUFBVW5CLEVBQUlXLE9BQU8sS0FBSzNCLEtBQU8sQ0FBRTRCLFFBQVUsOEJBRTlDWixFQUFJVyxPQUFPLEtBQUszQixLQUFLLENBQUNZLGlCQVg5QkksRUFBSVcsT0FBTyxLQUFLM0IsS0FBTSxDQUFFNEIsUUFBVSw4QkFrQjFDN0MsSUFDQWlDLEVBQUlXLE9BQU8sS0FBSzNCLEtBQU13QixHQUc5QixNQUFRbEIsR0FDSnZCLElBQ0FpQyxFQUFJVyxPQUFPLEtBQUszQixLQUFLLENBQUM0QixRQUFVdEIsRUFBRThCLGFBSTFDNUcsRUFBT0QsUUFBVXNGLEcsY0N0RGpCckYsRUFBT0QsUUFBVWtDLFFBQVEsVyxnQkNBekIsTUFBTSxPQUFDZ0QsR0FBVWhELEVBQVEsR0FDbkI0RSxFQUFRNUUsRUFBUSxHQUVoQm9ELEVBQVNKLElBSWZJLEVBQU9DLEtBQU8sVUFBWTdCLE1BQU84QixFQUFLQyxLQUNsQyxNQUFNLGtCQUFDbEMsRUFBRCxtQkFBcUJDLEdBQXNCdEIsRUFBUyxJQUNwRCxjQUFFc0UsRUFBRixnQkFBa0JDLEVBQWxCLFFBQW9DZixFQUFwQyxHQUE4Q0MsR0FBT0gsRUFBSUksS0FDL0QsSUFDSSxNQUFNbUIsUUFBaUJ4RCxFQUFrQixrQkFDbkMsUUFBQ3NDLEVBQUQsUUFBV0MsR0FBWTVELEVBQVMsR0FDaEM2RCxFQUFZLElBQUlGLEVBQVNrQixHQUMvQmhCLEVBQVVDLE1BQU8sZ0JBQWtCRixFQUFVVSxHQUM3Q1QsRUFBVUMsTUFBTyxrQkFBb0JGLEVBQVVXLEdBQy9DVixFQUFVQyxNQUFPLFVBQVlGLEVBQVVKLEdBQ3ZDSyxFQUFVQyxNQUFPLEtBQU9GLEVBQVVnQixFQUFNRSxTQUFTckIsRUFBSyxXQUNqQ0ksRUFBVUcsUUFBUyxzQkFFcEMxQyxJQUNBaUMsRUFBSVcsT0FBTyxLQUFLM0IsS0FBTSxDQUFFNEIsUUFBVSxzQ0FHMUMsTUFBT3RCLEdBQ0h2QixJQUNBaUMsRUFBSVcsT0FBTyxLQUFLM0IsS0FBTyxDQUFFNEIsUUFBVXRCLEVBQUU4QixhQTZJN0M1RyxFQUFPRCxRQUFVc0YsRyxnQkN2S2pCLE1BQU1KLEVBQVNoRCxFQUFRLEdBQ2pCa0QsRUFBTWxELEVBQVEsR0FDZCtFLEVBQVMvRSxFQUFRLEdBRWpCb0QsRUFBT0osSUFFYkksRUFBT3ZFLElBQUksSUFBSSxDQUFDeUUsRUFBSUMsS0FFaEIsR0FBSUQsRUFBSTBCLFFBQVFDLGNBRVgsQ0FDRCxNQUFNOUIsRUFBUUcsRUFBSTBCLFFBQVFDLGNBQWNDLE1BQU0sS0FBSyxHQUNuRGhDLEVBQUlpQyxPQUFPaEMsRUFBTTRCLEVBQU85RSxPQUFPLENBQUM0QyxFQUFFdkUsS0FDM0J1RSxFQUNDVSxFQUFJVyxPQUFPLEtBQUszQixLQUFLLENBQUM0QixRQUFRdEIsRUFBRXRFLE9BR2hDZ0YsRUFBSVcsT0FBTyxLQUFLM0IsS0FBS2pFLFVBUjdCaUYsRUFBSVcsT0FBTyxLQUFLM0IsS0FBSyxDQUFDNEIsUUFBUSxzQ0FhdENwRyxFQUFPRCxRQUFVc0YiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHNlY3JldDonbWFzdGVyU29mdDIwMjAnXHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtc3NxbFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiY3J5cHRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpOyIsImNvbnN0IG1zc3FsID0gcmVxdWlyZSgnbXNzcWwnKTtcclxuaWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpeyByZXF1aXJlKCdjb2xvcnMnKSB9XHJcblxyXG52YXIgVVJJXHJcblxyXG5pZihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jyl7XHJcbiAgICAvLyBVUkkgPSB7XHJcbiAgICAvLyAgICAgdXNlcjogXHJcbiAgICAvLyAgICAgcGFzc3dvcmQ6IFxyXG4gICAgLy8gICAgIGRhdGFiYXNlOiBcclxuICAgIC8vICAgICBwb3J0OjE0MzMsXHJcbiAgICAvLyAgICAgc2VydmVyOidcclxuICAgIC8vICAgICBvcHRpb25zOntcclxuICAgIC8vICAgICAgICAgYXBwTmFtZTpcclxuICAgIC8vICAgICAgICAgZW5hYmxlQXJpdGhBYm9ydDp0cnVlLFxyXG4gICAgLy8gICAgICAgICBlbmNyeXB0OmZhbHNlXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgICxcclxuICAgIC8vICAgICBjb25uZWN0aW9uVGltZU91dDoxNTAwMDAsXHJcbiAgICAvLyAgICAgZHJpdmVyOid0ZWRpb3VzJyxcclxuICAgIC8vICAgICBzdHJlYW06ZmFsc2UsXHJcbiAgICAvLyAgICAgcG9vbDp7XHJcbiAgICAvLyAgICAgICAgIG1heDoyMCxcclxuICAgIC8vICAgICAgICAgbWluOjAsXHJcbiAgICAvLyAgICAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOjMwMDAwLFxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuICAgIFVSSSA9IHtcclxuICAgICAgICB1c2VyOiAnZ2VzdExpbmVfU1FMTG9naW5fMScsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICdsdHA2eG11cDN0JyxcclxuICAgICAgICBkYXRhYmFzZTogJ2dlc3RMaW5lREInLFxyXG4gICAgICAgIHNlcnZlcjonZ2VzdExpbmVEQi5tc3NxbC5zb21lZS5jb20nLFxyXG4gICAgICAgIG9wdGlvbnM6e1xyXG4gICAgICAgICAgICBhcHBOYW1lOidtYXN0ZXJTb2Z0LUFQSScsXHJcbiAgICAgICAgICAgIGVuYWJsZUFyaXRoQWJvcnQ6dHJ1ZSxcclxuICAgICAgICAgICAgZW5jcnlwdDpmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgY29ubmVjdGlvblRpbWVPdXQ6MTUwMDAwLFxyXG4gICAgICAgIGRyaXZlcjondGVkaW91cycsXHJcbiAgICAgICAgc3RyZWFtOmZhbHNlLFxyXG4gICAgICAgIHBvb2w6e1xyXG4gICAgICAgICAgICBtYXg6MjAsXHJcbiAgICAgICAgICAgIG1pbjowLFxyXG4gICAgICAgICAgICBpZGxlVGltZW91dE1pbGxpczozMDAwMCxcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZWxzZXtcclxuICAgIFVSSSA9IHtcclxuICAgICAgICB1c2VyIDogcHJvY2Vzcy5lbnYuVVNFUlNRTCAsXHJcbiAgICAgICAgcGFzc3dvcmQgOiBwcm9jZXNzLmVudi5QQVNTV09SRFNRTCAsXHJcbiAgICAgICAgZGF0YWJhc2UgOiBwcm9jZXNzLmVudi5EQVRBQkFTRVNRTCAsXHJcbiAgICAgICAgc2VydmVyIDogcHJvY2Vzcy5lbnYuU0VSVkVSU1FMICxcclxuICAgICAgICBvcHRpb25zIDoge1xyXG4gICAgICAgICAgICBlbmFibGVBcml0aEFib3J0IDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIGVuY3J5cHQgOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBDb25leGlvblNRTCA9IHsgYWJyaXJDb25leGlvbjp1bmRlZmluZWQsIGNlcnJhckNvbmV4aW9uOnVuZGVmaW5lZCwgYWJyaXJDb25leGlvblBPT0w6dW5kZWZpbmVkLCBjZXJyYXJDb25leGlvblBPT0w6dW5kZWZpbmVkIH1cclxuLy8gdmFyIGNvbmV4aW9uXHJcbi8vIENvbmV4aW9uU1FMLmFicmlyQ29uZXhpb24gPSBhc3luYyBmdW5jdGlvbiAoKXtcclxuLy8gICAgIGF3YWl0IG1zc3FsLmNvbm5lY3QoVVJJKVxyXG4vLyAgICAgLnRoZW4ocG9vbD0+e1xyXG4vLyAgICAgICAgIGlmKHBvb2wuX2Nvbm5lY3RlZCl7XHJcbi8vICAgICAgICAgICAgIGlmKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKXtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25lY2lvbiBTUUwgU0VSVkVSJy5ibHVlLCcgQUJJRVJUQScuZ3JlZW4pXHJcbi8vICAgICAgICAgICAgICAgICBjb25leGlvbiA9IHBvb2xcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBlbHNle1xyXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGUgQ29uZXhpb24nLHBvb2wuX2Nvbm5lY3RlZClcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KVxyXG4vLyB9XHJcbi8vIENvbmV4aW9uU1FMLmNlcnJhckNvbmV4aW9uID0gYXN5bmMgZnVuY3Rpb24gKCl7XHJcbi8vICAgICBhd2FpdCBjb25leGlvbi5jbG9zZSgpXHJcbi8vICAgICBpZihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jyl7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2coJ0NvbmVjaW9uIFNRTCBTRVJWRVInLmJsdWUsJyBDRVJSQURBJy5ncmVlbilcclxuLy8gICAgIH1cclxuLy8gfVxyXG5cclxuY29uc3QgY29uZXhpb25lcyA9IHt9XHJcblxyXG5Db25leGlvblNRTC5hYnJpckNvbmV4aW9uUE9PTCA9IGFzeW5jIG5hbWUgPT57XHJcbiAgICBpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmV4aW9uZXMsbmFtZSkpe1xyXG4gICAgICAgIGNvbnN0IG5ld0NvbmV4aW9uID0gbmV3IG1zc3FsLkNvbm5lY3Rpb25Qb29sKFVSSSlcclxuICAgICAgICBjb25zdCBjbG9zZSA9IG5ld0NvbmV4aW9uLmNsb3NlLmJpbmQobmV3Q29uZXhpb24pXHJcbiAgICAgICAgbmV3Q29uZXhpb24uY2xvc2UgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGUgY29uZXhpb25lc1tuYW1lXVxyXG4gICAgICAgICAgICByZXR1cm4gY2xvc2UoLi4uYXJncylcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgbmV3Q29uZXhpb24uY29ubmVjdCgpXHJcbiAgICAgICAgY29uZXhpb25lc1tuYW1lXSA9IG5ld0NvbmV4aW9uXHJcbiAgICAgICAgcmV0dXJuIGNvbmV4aW9uZXNbbmFtZV1cclxuICAgIH1cclxufVxyXG5cclxuQ29uZXhpb25TUUwuY2VycmFyQ29uZXhpb25QT09MID0gKCkgPT57XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyhjb25leGlvbmVzKS5tYXAoKHBvb2wpPT57XHJcbiAgICAgICAgcmV0dXJuIHBvb2wuY2xvc2UoKVxyXG4gICAgfSkpXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBDb25leGlvblNRTCIsImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcclxuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKVxyXG52YXIgbW9yZ2FuXHJcblxyXG5pZihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jyl7XHJcbiAgICByZXF1aXJlKCdjb2xvcnMnKVxyXG4gICAgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJylcclxufVxyXG4vLyBjb25zb2xlLmxvZyhwcm9jZXNzLmVudi5OT0RFX0VOVilcclxuXHJcbmNvbnN0IHNlcnZpZG9yID0gZXhwcmVzcygpXHJcbnNlcnZpZG9yLnVzZShjb3JzKCkpXHJcblxyXG4vLyBtaWRkZWx3YXJlXHJcblxyXG5zZXJ2aWRvci51c2UoZXhwcmVzcy5qc29uKCkpXHJcbnNlcnZpZG9yLnVzZShleHByZXNzLnVybGVuY29kZWQoe2V4dGVuZGVkOiB0cnVlfSkpXHJcbi8vIHNlcnZpZG9yLnVzZShyZXF1aXJlKCcuL3J1dGFzQXBpL2F1dGhBY2Nlc29zL2F1dGhBbGxSb3V0ZXInKSlcclxuXHJcblxyXG5pZihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyApIHsgIHNlcnZpZG9yLnVzZShtb3JnYW4oJ2RldicpKSB9XHJcblxyXG5zZXJ2aWRvci51c2UoJy9hcGkvbG9ndWVvJyxyZXF1aXJlKCcuL3J1dGFzQXBpL0xvZ3VlbycpKVxyXG4vLyBzZXJ2aWRvci51c2UoJy9hcGkvYXV0aFJvdXRlclJlYWN0L2FkbWluJyxyZXF1aXJlKCcuL3J1dGFzQXBpL2F1dGhBY2Nlc29zUmVhY3QvYXV0aEFkbWluUm91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL2F1dGhSb3V0ZXJSZWFjdC9uaXZlbDEnLHJlcXVpcmUoJy4vcnV0YXNBcGkvYXV0aEFjY2Vzb3NSZWFjdC9hdXRoTml2ZWwxUm91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL2F1dGhSb3V0ZXJSZWFjdC9uaXZlbDInLHJlcXVpcmUoJy4vcnV0YXNBcGkvYXV0aEFjY2Vzb3NSZWFjdC9hdXRoTml2ZWwyUm91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL2F1dGhSb3V0ZXJSZWFjdC9uaXZlbDMnLHJlcXVpcmUoJy4vcnV0YXNBcGkvYXV0aEFjY2Vzb3NSZWFjdC9hdXRoTml2ZWwzUm91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL2F1dGhSb3V0ZXJSZWFjdC9uaXZlbDQnLHJlcXVpcmUoJy4vcnV0YXNBcGkvYXV0aEFjY2Vzb3NSZWFjdC9hdXRoTml2ZWw0Um91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL2F1dGhSb3V0ZXJSZWFjdC9uaXZlbDUnLHJlcXVpcmUoJy4vcnV0YXNBcGkvYXV0aEFjY2Vzb3NSZWFjdC9hdXRoTml2ZWw1Um91dGVyUmVhY3QnKSlcclxuLy8gc2Vydmlkb3IudXNlKCcvYXBpL3VzdWFyaW9zJyxyZXF1aXJlKCcuL3J1dGFzQXBpL2F1dGhBY2Nlc29zL2F1dGhBZG1pblJvdXRlcicpLHJlcXVpcmUoJy4vcnV0YXNBcGkvdXN1YXJpb3MnKSlcclxuc2Vydmlkb3IudXNlKCcvYXBpL3VzdWFyaW9zJyxyZXF1aXJlKCcuL3J1dGFzQXBpL3VzdWFyaW9zJykpXHJcbnNlcnZpZG9yLnVzZSgnL2FwaS9hdXRlbnRpZmljYXNpb24nLHJlcXVpcmUoJy4vcnV0YXNBcGkvQXV0ZW50aWZpY2FzaW9uJykpXHJcbi8vXHJcblxyXG4vL1NldHRpbmdzXHJcbnNlcnZpZG9yLnNldCgncG9ydCcscHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwKVxyXG5cclxuc2Vydmlkb3IubGlzdGVuKHNlcnZpZG9yLmdldCgncG9ydCcpLChtLGUpPT57XHJcbiAgICBpZihlKXtjb25zb2xlLmxvZyhlKX1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpZG9yIGNvcnJpZW5kbyBlbiBlbCBQVUVSVE8nLnllbGxvdyxzZXJ2aWRvci5nZXQoJ3BvcnQnKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpZG9yIGNvcnJpZW5kbyBlbiBlbCBQVUVSVE8nLHNlcnZpZG9yLmdldCgncG9ydCcpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjb3JzXCIpOyIsImNvbnN0IHtSb3V0ZXJ9ID0gcmVxdWlyZSgnZXhwcmVzcycpXHJcbmNvbnN0IGJjcnlwdCA9cmVxdWlyZSgnYmNyeXB0JylcclxuLy8gY29uc3QgVXN1YXJpbyA9IHJlcXVpcmUoJy4uL2VzcXVlbWFzTW9uZ28vZXNxdWVtYVVzdWFyaW9zJylcclxuY29uc3Qge3NlY3JldH0gPSByZXF1aXJlKCcuLi9DT05GSUcnKVxyXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKVxyXG5jb25zdCB7IHRva2VuIH0gPSByZXF1aXJlKCdtb3JnYW4nKVxyXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKVxyXG5cclxuXHJcblxyXG5yb3V0ZXIucG9zdCAoICcvJyAsIGFzeW5jICggcmVxICwgcmVzICkgPT4ge1xyXG4gICAgY29uc3QgeyBhYnJpckNvbmV4aW9uUE9PTCAsIGNlcnJhckNvbmV4aW9uUE9PTCB9ID0gcmVxdWlyZSAoJy4uL2NvbmV4aW9uZXMvc3FsU2VydmVyJylcclxuICAgIGNvbnN0IHsgdXN1YXJpbyAsIHB3IH0gPSByZXEuYm9keVxyXG4gICAgY29uc3QgeyBSZXF1ZXN0ICwgVmFyQ2hhciB9ID0gcmVxdWlyZSAoJ21zc3FsJylcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCAoJ2xvZ3Vlb1VzdWFyaW8nKVxyXG4gICAgICAgIGNvbnN0IG15UmVxdWVzdCA9IG5ldyBSZXF1ZXN0IChjb25leGlvbilcclxuICAgICAgICBteVJlcXVlc3QuaW5wdXQgKCd1c3VhcmlvJyAsIFZhckNoYXIgLCB1c3VhcmlvIClcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBteVJlcXVlc3QuZXhlY3V0ZSAoJ3BhX2xvZ2luJylcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbiAgICAgICAgICAgIGlmKHJlc3VsdC5yb3dzQWZmZWN0ZWRbMF0gPT09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbiAoIHsgbWVuc2FqZSA6ICdVc3VhcmlvIGluZXhpc3RlbnRlICcgfSApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFiY3J5cHQuY29tcGFyZVN5bmMoIHB3ICwgcmVzdWx0LnJlY29yZHNldFswXS5wdyApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKCB7IG1lbnNhamUgOiAnUGFzc3dvcmQgaW5jb3JyZWN0YSAnIH0gKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlVXN1YXJpbyA6IHJlc3VsdC5yZWNvcmRzZXRbMF0ubm9tYnJlVXN1YXJpbyAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwZWxsaWRvVXN1YXJpbyA6IHJlc3VsdC5yZWNvcmRzZXRbMF0uYXBlbGxpZG9Vc3VhcmlvICxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXN1YXJpbyA6IHJlc3VsdC5yZWNvcmRzZXRbMF0udXN1YXJpb1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBqd3Quc2lnbiggdXNlciAsIHJlcXVpcmUoJy4uL0NPTkZJRycpLnNlY3JldCAsIHsgZXhwaXJlc0luIDogMTQ0MDAgfSAgLCAgICggZXJyb3IgLCB0b2tlbiApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlcnJvciApIHsgcmVzLnN0YXR1cygyMDApLmpzb24gKCB7IG1lbnNhamUgOiAnRXJyb3IgYWwgZ2VuZXJhciBlbCB0b2tlbicgfSApICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe3Rva2VufSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uIChyZXN1bHQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKCBlICkge1xyXG4gICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe21lbnNhamUgOiBlLm1lc3NhZ2V9KVxyXG4gICAgfVxyXG59IClcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibW9yZ2FuXCIpOyIsImNvbnN0IHtSb3V0ZXJ9ID0gcmVxdWlyZSgnZXhwcmVzcycpXHJcbmNvbnN0IGJjcnlwID0gcmVxdWlyZSgnYmNyeXB0JylcclxuXHJcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpXHJcblxyXG4vLyAhIGluc2VydGFyIHVzdWFyaW9cclxuXHJcbnJvdXRlci5wb3N0ICggJy9pbnNlcnQnICwgYXN5bmMgKHJlcSwgcmVzICkgPT4ge1xyXG4gICAgY29uc3Qge2FicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUgKCcuLi9jb25leGlvbmVzL3NxbFNlcnZlcicpXHJcbiAgICBjb25zdCB7IG5vbWJyZVVzdWFyaW8gLCBhcGVsbGlkb1VzdWFyaW8gLCB1c3VhcmlvICwgcHcgfSA9IHJlcS5ib2R5XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGNvbmV4aW9uID0gYXdhaXQgYWJyaXJDb25leGlvblBPT0woJ2luc2VydFVzdWFyaW8nKVxyXG4gICAgICAgIGNvbnN0IHtSZXF1ZXN0ICwgVmFyQ2hhciB9ID0gcmVxdWlyZSAoJ21zc3FsJylcclxuICAgICAgICBjb25zdCBteVJlcXVlc3QgPSBuZXcgUmVxdWVzdCAoY29uZXhpb24pXHJcbiAgICAgICAgbXlSZXF1ZXN0LmlucHV0ICgnbm9tYnJlVXN1YXJpbycgLCBWYXJDaGFyICwgbm9tYnJlVXN1YXJpbylcclxuICAgICAgICBteVJlcXVlc3QuaW5wdXQgKCdhcGVsbGlkb1VzdWFyaW8nICwgVmFyQ2hhciAsIGFwZWxsaWRvVXN1YXJpbylcclxuICAgICAgICBteVJlcXVlc3QuaW5wdXQgKCd1c3VhcmlvJyAsIFZhckNoYXIgLCB1c3VhcmlvKVxyXG4gICAgICAgIG15UmVxdWVzdC5pbnB1dCAoJ3B3JyAsIFZhckNoYXIgLCBiY3J5cC5oYXNoU3luYyhwdyAsIDEwKSApXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbXlSZXF1ZXN0LmV4ZWN1dGUoICdwYV9pbnNlcnRVc3VhcmlvJyApXHJcbiAgICAgICAgaWYgKCByZXN1bHQgKSB7XHJcbiAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKCB7IG1lbnNhamUgOiAnVXN1YXJpbyBpbnNlcnRhZG8gY29ycmVjdGFtZW50ZSAnIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjZXJyYXJDb25leGlvblBPT0woKVxyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uICggeyBtZW5zYWplIDogZS5tZXNzYWdlIH0gKVxyXG4gICAgfVxyXG59IClcclxuXHJcblxyXG4vLyAvLyAhIGxpc3RhZG8gZGUgdXN1YXJpb3NcclxuLy8gcm91dGVyLmdldCgnLycsYXN5bmMgKHJlcSxyZXMpPT57XHJcbi8vICAgICBjb25zdCB7IGFicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUgKCcuLi9jb25leGlvbmVzL3NxbFNlcnZlcicpXHJcbi8vICAgICB0cnl7XHJcbi8vICAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCggJ2xpYXN0YVVzdWFyaW8nKVxyXG4vLyAgICAgICAgIGNvbnN0IG1zc3FsID0gcmVxdWlyZSgnbXNzcWwnKVxyXG4vLyAgICAgICAgIGNvbnN0IG15UmVxdWVzdCA9IG5ldyBtc3NxbC5SZXF1ZXN0KGNvbmV4aW9uKVxyXG4vLyAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG15UmVxdWVzdC5leGVjdXRlKCdwYV9saXN0YVVzdWFyaW9zJylcclxuLy8gICAgICAgICBpZihyZXN1bHQpe1xyXG4vLyAgICAgICAgICAgICBjZXJyYXJDb25leGlvblBPT0woKVxyXG4vLyAgICAgICAgICAgICByZXMuanNvbihyZXN1bHQucmVjb3Jkc2V0KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBlbHNle1xyXG4vLyAgICAgICAgICAgICBjZXJyYXJDb25leGlvblBPT0woKVxyXG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7c3RhdHVzOiA0MDMsbWVuc2FqZTplLm1lc3NhZ2V9KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIGNhdGNoKGUpe1xyXG4vLyAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbi8vICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe3N0YXR1czogNDAzLG1lbnNhamU6ZS5tZXNzYWdlfSlcclxuLy8gICAgIH1cclxuLy8gfSlcclxuLy8gLy8hIGxpc3RhIGRlIHBlcmZpbGVzXHJcbi8vIHJvdXRlci5nZXQoJy9wZXJmaWxlcycsYXN5bmMgKHJlcSxyZXMpPT57XHJcbi8vICAgICBjb25zdCB7IGFicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUgKCcuLi9jb25leGlvbmVzL3NxbFNlcnZlcicpXHJcbi8vICAgICB0cnl7XHJcbi8vICAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCggJ2xpc3RhUGVyZmlsZXMnKVxyXG4vLyAgICAgICAgIGNvbnN0IG1zc3FsID0gcmVxdWlyZSgnbXNzcWwnKVxyXG4vLyAgICAgICAgIGNvbnN0IG15UmVxdWVzdCA9IG5ldyBtc3NxbC5SZXF1ZXN0KGNvbmV4aW9uKVxyXG4vLyAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG15UmVxdWVzdC5leGVjdXRlKCdwYV9saXN0YVBlcmZpbGVzJylcclxuLy8gICAgICAgICBpZihyZXN1bHQpe1xyXG4vLyAgICAgICAgICAgICBjZXJyYXJDb25leGlvblBPT0woKVxyXG4vLyAgICAgICAgICAgICByZXMuanNvbihyZXN1bHQucmVjb3Jkc2V0KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBlbHNle1xyXG4vLyAgICAgICAgICAgICBjZXJyYXJDb25leGlvblBPT0woKVxyXG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7c3RhdHVzOiA0MDMsbWVuc2FqZTplLm1lc3NhZ2V9KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIGNhdGNoKGUpe1xyXG4vLyAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbi8vICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe3N0YXR1czogNDAzLG1lbnNhamU6ZS5tZXNzYWdlfSlcclxuLy8gICAgIH1cclxuLy8gfSlcclxuLy8gLy8hIGNvbnN1bHRhIHVzdWFyaW8gcG9yIGlkXHJcbi8vIHJvdXRlci5nZXQoJy86aWQnLGFzeW5jIChyZXEscmVzKT0+e1xyXG4vLyAgICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkXHJcbi8vICAgICBjb25zdCB7IGFicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUgKCcuLi9jb25leGlvbmVzL3NxbFNlcnZlcicpXHJcbi8vICAgICB0cnl7XHJcbi8vICAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCggJ2dldFVzZXhJZCcpXHJcbi8vICAgICAgICAgY29uc3QgbXNzcWwgPSByZXF1aXJlKCdtc3NxbCcpXHJcbi8vICAgICAgICAgY29uc3QgbXlSZXF1ZXN0ID0gbmV3IG1zc3FsLlJlcXVlc3QoY29uZXhpb24pXHJcbi8vICAgICAgICAgbXlSZXF1ZXN0LmlucHV0KCdpZFVzdWFyaW8nICwgbXNzcWwuSW50ICwgaWQpXHJcbi8vICAgICAgICAgY29uc3QgcXVlcnkgPSBgc2VsZWN0XHJcbi8vICAgICAgICAgdS5pZCBhcyBpZFVzdWFyaW8gLFxyXG4vLyAgICAgICAgIHUudXNlck5hbWUgYXMgdXNlck5hbWUgLFxyXG4vLyAgICAgICAgIHUuZW1haWwgYXMgZW1haWwgLFxyXG4vLyAgICAgICAgIHUubm9tYnJlIGFzIG5vbWJyZVVzdWFyaW8gLFxyXG4vLyAgICAgICAgIHUuYXBlbGxpZG8gYXMgYXBlbGxpZG9Vc3VhcmlvICxcclxuLy8gICAgICAgICBwLmlkIGFzIGlkUGVyZmlsICxcclxuLy8gICAgICAgICBwLm5vbWJyZSBhcyBub21icmVQZXJmaWxcclxuLy8gICAgICAgICBmcm9tIHVzdWFyaW9zIHVcclxuLy8gICAgICAgICBqb2luIHBlcmZpbGVzIHAgb24gcC5pZCA9IHUuaWRfcGVyZmlsXHJcbi8vICAgICAgICAgd2hlcmUgdS5pZCA9IEBpZFVzdWFyaW9gXHJcbi8vICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbXlSZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KVxyXG4vLyAgICAgICAgIGlmKHJlc3VsdCl7XHJcbi8vICAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbi8vICAgICAgICAgICAgIHJlcy5qc29uKHJlc3VsdC5yZWNvcmRzZXQpXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGVsc2V7XHJcbi8vICAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbi8vICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtzdGF0dXM6IDQwMyxtZW5zYWplOmUubWVzc2FnZX0pXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyAgICAgY2F0Y2goZSl7XHJcbi8vICAgICAgICAgY2VycmFyQ29uZXhpb25QT09MKClcclxuLy8gICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7c3RhdHVzOiA0MDMsbWVuc2FqZTplLm1lc3NhZ2V9KVxyXG4vLyAgICAgfVxyXG4vLyB9KVxyXG5cclxuLy8gLy8hZ3VhcmRhIHVzdWFyaW9cclxuLy8gcm91dGVyLnBvc3QoJy8nLGFzeW5jIChyZXEscmVzKT0+e1xyXG4vLyAgICAgY29uc3Qge2FicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUoJy4uL2NvbmV4aW9uZXMvc3FsU2VydmVyJylcclxuLy8gICAgIGNvbnN0ICB7dXNlck5hbWUscGFzc3dvcmQsZW1haWwsbm9tYnJlLGFwZWxsaWRvLGlkUGVyZmlsfSA9IHJlcS5ib2R5XHJcbi8vICAgICB0cnl7XHJcbi8vICAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCgnc2F2ZVVzZXInKVxyXG4vLyAgICAgICAgIGNvbnN0IG1zc3FsID0gcmVxdWlyZSAoJ21zc3FsJylcclxuLy8gICAgICAgICBjb25zdCBteVJlcXVlc3QgPSBuZXcgbXNzcWwuUmVxdWVzdChjb25leGlvbilcclxuLy8gICAgICAgICBjb25zdCBwdyA9IGJjcnlwLmhhc2hTeW5jKHBhc3N3b3JkLDEwKVxyXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKHB3KVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgndXNlck5hbWUnICwgbXNzcWwuVmFyQ2hhciAsIHVzZXJOYW1lKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgncGFzc3dvcmQnICwgbXNzcWwuVmFyQ2hhciAsIHB3KVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgnZW1haWwnICwgbXNzcWwuVmFyQ2hhciAsIGVtYWlsKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgnbm9tYnJlJyAsIG1zc3FsLlZhckNoYXIgLCBub21icmUpXHJcbi8vICAgICAgICAgbXlSZXF1ZXN0LmlucHV0KCdhcGVsbGlkbycgLCBtc3NxbC5WYXJDaGFyICwgYXBlbGxpZG8pXHJcbi8vICAgICAgICAgbXlSZXF1ZXN0LmlucHV0KCdpZFBlcmZpbCcgLCBtc3NxbC5JbnQgLCBpZFBlcmZpbClcclxuLy8gICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBteVJlcXVlc3QuZXhlY3V0ZSgncGFfaW5zZXJ0VXN1YXJpb3MnKVxyXG4vLyAgICAgICAgIGlmKHJlc3VsdCl7XHJcbi8vICAgICAgICAgICAgIGNlcnJhckNvbmV4aW9uUE9PTCgpXHJcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcclxuLy8gICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZW5zYWplOiAndXN1YXJpbyBpbnNlcnRhZG8gY29ycmVjdGFtZW50ZSAhJyB9KVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIGNhdGNoKGVycil7XHJcbi8vICAgICAgICAgY2VycmFyQ29uZXhpb25QT09MKClcclxuLy8gICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7ZXJyb3I6ZXJyLm1lc3NhZ2V9KVxyXG4vLyAgICAgfVxyXG4vLyB9KVxyXG5cclxuLy8gcm91dGVyLnB1dCgnLycsIGFzeW5jIChyZXEscmVzKT0+e1xyXG4vLyAgICAgY29uc3Qge2FicmlyQ29uZXhpb25QT09MICwgY2VycmFyQ29uZXhpb25QT09MfSA9IHJlcXVpcmUoJy4uL2NvbmV4aW9uZXMvc3FsU2VydmVyJylcclxuLy8gICAgIGNvbnN0ICB7dXNlck5hbWUscGFzc3dvcmQsZW1haWwsbm9tYnJlLGFwZWxsaWRvLGlkUGVyZmlsICwgaWRVc3VhcmlvfSA9IHJlcS5ib2R5XHJcbi8vICAgICB0cnl7XHJcbi8vICAgICAgICAgY29uc3QgY29uZXhpb24gPSBhd2FpdCBhYnJpckNvbmV4aW9uUE9PTCgndXBkYXRlVXNlcicpXHJcbi8vICAgICAgICAgY29uc3QgbXNzcWwgPSByZXF1aXJlICgnbXNzcWwnKVxyXG4vLyAgICAgICAgIGNvbnN0IG15UmVxdWVzdCA9IG5ldyBtc3NxbC5SZXF1ZXN0KGNvbmV4aW9uKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgndXNlck5hbWUnICwgbXNzcWwuVmFyQ2hhciAsIHVzZXJOYW1lKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgncGFzc3dvcmQnICwgbXNzcWwuVmFyQ2hhciAsIGJjcnlwLmhhc2hTeW5jKHBhc3N3b3JkKSlcclxuLy8gICAgICAgICBteVJlcXVlc3QuaW5wdXQoJ2VtYWlsJyAsIG1zc3FsLlZhckNoYXIgLCBlbWFpbClcclxuLy8gICAgICAgICBteVJlcXVlc3QuaW5wdXQoJ25vbWJyZScgLCBtc3NxbC5WYXJDaGFyICwgbm9tYnJlKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgnYXBlbGxpZG8nICwgbXNzcWwuVmFyQ2hhciAsIGFwZWxsaWRvKVxyXG4vLyAgICAgICAgIG15UmVxdWVzdC5pbnB1dCgnaWRQZXJmaWwnICwgbXNzcWwuSW50ICwgaWRQZXJmaWwpXHJcbi8vICAgICAgICAgbXlSZXF1ZXN0LmlucHV0KCdpZFVzdWFyaW8nICwgbXNzcWwuSW50ICwgaWRVc3VhcmlvKVxyXG4vLyAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG15UmVxdWVzdC5leGVjdXRlKCdwYV91cGRhdGVVc3VhcmlvcycpXHJcbi8vICAgICAgICAgaWYocmVzdWx0KXtcclxuLy8gICAgICAgICAgICAgY2VycmFyQ29uZXhpb25QT09MKClcclxuLy8gICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lbnNhamU6ICd1c3VhcmlvIGluc2VydGFkbyBjb3JyZWN0YW1lbnRlICEnIH0pXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyAgICAgY2F0Y2goZSl7XHJcbi8vICAgICAgICAgY2VycmFyQ29uZXhpb25QT09MKClcclxuLy8gICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7ZXJyb3I6ZXJyLm1lc3NhZ2V9KVxyXG4vLyAgICAgfVxyXG4vLyB9KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7IiwiY29uc3QgUm91dGVyID0gcmVxdWlyZSgnZXhwcmVzcycpXHJcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXHJcbmNvbnN0IENPTkZJRyA9IHJlcXVpcmUoJy4uL0NPTkZJRycpXHJcblxyXG5jb25zdCByb3V0ZXI9Um91dGVyKCk7XHJcblxyXG5yb3V0ZXIuZ2V0KCcvJywocmVxLHJlcyk9PntcclxuXHJcbiAgICBpZighcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbil7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe21lbnNhamU6J05vIGVudmlvIGVsIFRva2VuIGVuIGVsIGhlYWRlcnMnfSlcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sQ09ORklHLnNlY3JldCwoZSxkKT0+e1xyXG4gICAgICAgICAgICBpZihlKXtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHttZW5zYWplOmUubmFtZX0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KVxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwic291cmNlUm9vdCI6IiJ9